Neural Network Tools for STM32 v1.4.0 (AI tools v5.2.0)
Created date       : 2021-09-29 15:46:20
Parameters         : generate -m C:\Users\Dell\Downloads\yolo-s-final.h5 -o 20210929\X-CUBE-AI\App -w stm32ai_ws -n network -c 1

Exec/report summary (generate dur=1.65s err=0)
------------------------------------------------------------------------------------------------------------------------
model file         : C:\Users\Dell\Downloads\yolo-s-final.h5
type               : keras (keras_dump) - tf.keras 2.4.0
c_name             : network
compression        : None
quantize           : None
workspace dir      : C:\zhamao\study\bisai\RT-AK-main\RT-AK\rt_ai_tools\stm32ai_ws
output dir         : C:\zhamao\study\bisai\RT-AK-main\RT-AK\rt_ai_tools\20210929\X-CUBE-AI\App

model_name         : yolosfinal
model_hash         : ff2d8adfb0082a2a73fe7dc702c23b4f
input              : image_input [25600 items, 100.00 KiB, ai_float, FLOAT32, (160, 160, 1)]
inputs (total)     : 100.00 KiB
output             : conv2d_8 [750 items, 2.93 KiB, ai_float, FLOAT32, (5, 5, 30)]
outputs (total)    : 2.93 KiB
params #           : 12,966 items (50.65 KiB)
macc               : 1,443,650
weights (ro)       : 50,184 B (49.01 KiB) (-3.24%) 
activations (rw)   : 206,112 B (201.28 KiB) 
ram (total)        : 311,512 B (304.21 KiB) = 206,112 + 102,400 + 3,000

------------------------------------------------------------------------------------------------------------------------
id  layer (type)                       output shape      param #     connected to             macc           rom                
------------------------------------------------------------------------------------------------------------------------
0   image_input (Input)                (160, 160, 1)                                                                            
------------------------------------------------------------------------------------------------------------------------
1   zero_padding2d (Pad)               (161, 161, 1)                 image_input                                                
------------------------------------------------------------------------------------------------------------------------
2   conv2d (Conv2D)                    (80, 80, 8)       72          zero_padding2d           512,008        320                
------------------------------------------------------------------------------------------------------------------------
3   batch_normalization (ScaleBias)    (80, 80, 8)       16          conv2d                                                     
------------------------------------------------------------------------------------------------------------------------
4   re_lu (Nonlinearity)               (80, 80, 8)                   batch_normalization                                        
------------------------------------------------------------------------------------------------------------------------
5   zero_padding2d_1 (Pad)             (81, 81, 8)                   re_lu                                                      
------------------------------------------------------------------------------------------------------------------------
6   depthwise_conv2d (Conv2D)          (40, 40, 8)       72          zero_padding2d_1         128,008        320                
------------------------------------------------------------------------------------------------------------------------
7   batch_normalization_1 (ScaleBias)  (40, 40, 8)       16          depthwise_conv2d                                           
------------------------------------------------------------------------------------------------------------------------
8   re_lu_1 (Nonlinearity)             (40, 40, 8)                   batch_normalization_1                                      
------------------------------------------------------------------------------------------------------------------------
9   conv2d_1 (Conv2D)                  (40, 40, 4)       32          re_lu_1                  51,204         144                
------------------------------------------------------------------------------------------------------------------------
10  batch_normalization_2 (ScaleBias)  (40, 40, 4)       8           conv2d_1                                                   
------------------------------------------------------------------------------------------------------------------------
11  zero_padding2d_2 (Pad)             (41, 41, 4)                   batch_normalization_2                                      
------------------------------------------------------------------------------------------------------------------------
12  conv2d_2 (Conv2D)                  (20, 20, 8)       288         zero_padding2d_2         118,408        1,184              
------------------------------------------------------------------------------------------------------------------------
13  batch_normalization_3 (ScaleBias)  (20, 20, 8)       16          conv2d_2                                                   
------------------------------------------------------------------------------------------------------------------------
14  re_lu_2 (Nonlinearity)             (20, 20, 8)                   batch_normalization_3                                      
------------------------------------------------------------------------------------------------------------------------
15  conv2d_3 (Conv2D)                  (20, 20, 48)      384         re_lu_2                  172,848        1,728              
------------------------------------------------------------------------------------------------------------------------
16  batch_normalization_4 (ScaleBias)  (20, 20, 48)      96          conv2d_3                                                   
------------------------------------------------------------------------------------------------------------------------
17  re_lu_3 (Nonlinearity)             (20, 20, 48)                  batch_normalization_4                                      
------------------------------------------------------------------------------------------------------------------------
18  zero_padding2d_3 (Pad)             (21, 21, 48)                  re_lu_3                                                    
------------------------------------------------------------------------------------------------------------------------
19  depthwise_conv2d_1 (Conv2D)        (10, 10, 48)      432         zero_padding2d_3         48,048         1,920              
------------------------------------------------------------------------------------------------------------------------
20  batch_normalization_5 (ScaleBias)  (10, 10, 48)      96          depthwise_conv2d_1                                         
------------------------------------------------------------------------------------------------------------------------
21  re_lu_4 (Nonlinearity)             (10, 10, 48)                  batch_normalization_5                                      
------------------------------------------------------------------------------------------------------------------------
22  conv2d_4 (Conv2D)                  (10, 10, 16)      768         re_lu_4                  76,816         3,136              
------------------------------------------------------------------------------------------------------------------------
23  batch_normalization_6 (ScaleBias)  (10, 10, 16)      32          conv2d_4                                                   
------------------------------------------------------------------------------------------------------------------------
25  conv2d_5 (Conv2D)                  (10, 10, 64)      1,024       batch_normalization_6    108,864        4,352              
------------------------------------------------------------------------------------------------------------------------
26  batch_normalization_7 (ScaleBias)  (10, 10, 64)      128         conv2d_5                                                   
------------------------------------------------------------------------------------------------------------------------
27  re_lu_5 (Nonlinearity)             (10, 10, 64)                  batch_normalization_7                                      
------------------------------------------------------------------------------------------------------------------------
28  zero_padding2d_4 (Pad)             (11, 11, 64)                  re_lu_5                                                    
------------------------------------------------------------------------------------------------------------------------
29  depthwise_conv2d_2 (Conv2D)        (5, 5, 64)        576         zero_padding2d_4         16,064         2,560              
------------------------------------------------------------------------------------------------------------------------
30  batch_normalization_8 (ScaleBias)  (5, 5, 64)        128         depthwise_conv2d_2                                         
------------------------------------------------------------------------------------------------------------------------
31  re_lu_6 (Nonlinearity)             (5, 5, 64)                    batch_normalization_8                                      
------------------------------------------------------------------------------------------------------------------------
32  conv2d_6 (Conv2D)                  (5, 5, 24)        1,536       re_lu_6                  38,424         6,240              
------------------------------------------------------------------------------------------------------------------------
33  batch_normalization_9 (ScaleBias)  (5, 5, 24)        48          conv2d_6                                                   
------------------------------------------------------------------------------------------------------------------------
34  conv2d_7 (Conv2D)                  (5, 5, 128)       3,072       batch_normalization_9    76,928         12,800             
------------------------------------------------------------------------------------------------------------------------
35  batch_normalization_10 (ScaleBias) (5, 5, 128)       256         conv2d_7                                                   
------------------------------------------------------------------------------------------------------------------------
36  conv2d_8 (Conv2D)                  (5, 5, 30)        3,870       batch_normalization_10   96,030         15,480             
------------------------------------------------------------------------------------------------------------------------
yolosfinal p=12966(50.65 KBytes) macc=1443650 rom=49.01 KBytes (-3.24%) ram=201.28 KiB io_ram=102.93 KiB



Generated C-graph summary
------------------------------------------------------------------------------------------------------------------------
model name         : yolosfinal
c-name             : network
c-node #           : 12
c-array #          : 37
activations size   : 206112
weights size       : 50184
macc               : 1443650
inputs             : ['image_input_output_array']
outputs            : ['conv2d_8_output_array']


C-Arrays (37)
------------------------------------------------------------------------------------------------------------------------
c_id  name (*_array)              item/size           mem-pool     c-type       fmt    comment            
------------------------------------------------------------------------------------------------------------------------
0     conv2d_8_bias               30/120              weights      const float  float                     
1     conv2d_8_weights            3840/15360          weights      const float  float                     
2     conv2d_7_bias               128/512             weights      const float  float                     
3     conv2d_7_weights            3072/12288          weights      const float  float                     
4     conv2d_6_bias               24/96               weights      const float  float                     
5     conv2d_6_weights            1536/6144           weights      const float  float                     
6     depthwise_conv2d_2_bias     64/256              weights      const float  float                     
7     depthwise_conv2d_2_weights  576/2304            weights      const float  float                     
8     conv2d_5_bias               64/256              weights      const float  float                     
9     conv2d_5_weights            1024/4096           weights      const float  float                     
10    conv2d_4_bias               16/64               weights      const float  float                     
11    conv2d_4_weights            768/3072            weights      const float  float                     
12    depthwise_conv2d_1_bias     48/192              weights      const float  float                     
13    depthwise_conv2d_1_weights  432/1728            weights      const float  float                     
14    conv2d_3_bias               48/192              weights      const float  float                     
15    conv2d_3_weights            384/1536            weights      const float  float                     
16    conv2d_2_bias               8/32                weights      const float  float                     
17    conv2d_2_weights            288/1152            weights      const float  float                     
18    conv2d_1_bias               4/16                weights      const float  float                     
19    conv2d_1_weights            32/128              weights      const float  float                     
20    depthwise_conv2d_bias       8/32                weights      const float  float                     
21    depthwise_conv2d_weights    72/288              weights      const float  float                     
22    conv2d_bias                 8/32                weights      const float  float                     
23    conv2d_weights              72/288              weights      const float  float                     
24    image_input_output          25600/102400        user         float        float  /input             
25    conv2d_output               51200/204800        activations  float        float                     
26    depthwise_conv2d_output     12800/51200         activations  float        float                     
27    conv2d_1_output             6400/25600          activations  float        float                     
28    conv2d_2_output             3200/12800          activations  float        float                     
29    conv2d_3_output             19200/76800         activations  float        float                     
30    depthwise_conv2d_1_output   4800/19200          activations  float        float                     
31    conv2d_4_output             1600/6400           activations  float        float                     
32    conv2d_5_output             6400/25600          activations  float        float                     
33    depthwise_conv2d_2_output   1600/6400           activations  float        float                     
34    conv2d_6_output             600/2400            activations  float        float                     
35    conv2d_7_output             3200/12800          activations  float        float                     
36    conv2d_8_output             750/3000            user         float        float  /output            
------------------------------------------------------------------------------------------------------------------------


C-Layers (12)
------------------------------------------------------------------------------------------------------------------------
c_id  name (*_layer)      id  type    macc        rom         tensors                        shape (array id)                       
------------------------------------------------------------------------------------------------------------------------
0     conv2d              2   conv2d  512008      320         I: image_input_output          [1, 160, 160, 1] (24)                  
                                                              W: conv2d_weights                                                     
                                                              W: conv2d_bias                                                        
                                                              O: conv2d_output               [1, 80, 80, 8] (25)                    
------------------------------------------------------------------------------------------------------------------------
1     depthwise_conv2d    6   conv2d  128008      320         I: conv2d_output               [1, 80, 80, 8] (25)                    
                                                              W: depthwise_conv2d_weights                                           
                                                              W: depthwise_conv2d_bias                                              
                                                              O: depthwise_conv2d_output     [1, 40, 40, 8] (26)                    
------------------------------------------------------------------------------------------------------------------------
2     conv2d_1            9   conv2d  51204       144         I: depthwise_conv2d_output     [1, 40, 40, 8] (26)                    
                                                              W: conv2d_1_weights                                                   
                                                              W: conv2d_1_bias                                                      
                                                              O: conv2d_1_output             [1, 40, 40, 4] (27)                    
------------------------------------------------------------------------------------------------------------------------
3     conv2d_2            12  conv2d  118408      1184        I: conv2d_1_output             [1, 40, 40, 4] (27)                    
                                                              W: conv2d_2_weights                                                   
                                                              W: conv2d_2_bias                                                      
                                                              O: conv2d_2_output             [1, 20, 20, 8] (28)                    
------------------------------------------------------------------------------------------------------------------------
4     conv2d_3            15  conv2d  172848      1728        I: conv2d_2_output             [1, 20, 20, 8] (28)                    
                                                              W: conv2d_3_weights                                                   
                                                              W: conv2d_3_bias                                                      
                                                              O: conv2d_3_output             [1, 20, 20, 48] (29)                   
------------------------------------------------------------------------------------------------------------------------
5     depthwise_conv2d_1  19  conv2d  48048       1920        I: conv2d_3_output             [1, 20, 20, 48] (29)                   
                                                              W: depthwise_conv2d_1_weights                                         
                                                              W: depthwise_conv2d_1_bias                                            
                                                              O: depthwise_conv2d_1_output   [1, 10, 10, 48] (30)                   
------------------------------------------------------------------------------------------------------------------------
6     conv2d_4            22  conv2d  76816       3136        I: depthwise_conv2d_1_output   [1, 10, 10, 48] (30)                   
                                                              W: conv2d_4_weights                                                   
                                                              W: conv2d_4_bias                                                      
                                                              O: conv2d_4_output             [1, 10, 10, 16] (31)                   
------------------------------------------------------------------------------------------------------------------------
7     conv2d_5            25  conv2d  108864      4352        I: conv2d_4_output             [1, 10, 10, 16] (31)                   
                                                              W: conv2d_5_weights                                                   
                                                              W: conv2d_5_bias                                                      
                                                              O: conv2d_5_output             [1, 10, 10, 64] (32)                   
------------------------------------------------------------------------------------------------------------------------
8     depthwise_conv2d_2  29  conv2d  16064       2560        I: conv2d_5_output             [1, 10, 10, 64] (32)                   
                                                              W: depthwise_conv2d_2_weights                                         
                                                              W: depthwise_conv2d_2_bias                                            
                                                              O: depthwise_conv2d_2_output   [1, 5, 5, 64] (33)                     
------------------------------------------------------------------------------------------------------------------------
9     conv2d_6            32  conv2d  38424       6240        I: depthwise_conv2d_2_output   [1, 5, 5, 64] (33)                     
                                                              W: conv2d_6_weights                                                   
                                                              W: conv2d_6_bias                                                      
                                                              O: conv2d_6_output             [1, 5, 5, 24] (34)                     
------------------------------------------------------------------------------------------------------------------------
10    conv2d_7            34  conv2d  76928       12800       I: conv2d_6_output             [1, 5, 5, 24] (34)                     
                                                              W: conv2d_7_weights                                                   
                                                              W: conv2d_7_bias                                                      
                                                              O: conv2d_7_output             [1, 5, 5, 128] (35)                    
------------------------------------------------------------------------------------------------------------------------
11    conv2d_8            36  conv2d  96030       15480       I: conv2d_7_output             [1, 5, 5, 128] (35)                    
                                                              W: conv2d_8_weights                                                   
                                                              W: conv2d_8_bias                                                      
                                                              O: conv2d_8_output             [1, 5, 5, 30] (36)                     
------------------------------------------------------------------------------------------------------------------------


 
Complexity per-layer - macc=1,443,650 rom=50,184
------------------------------------------------------------------------------------------------------------------------
id      layer (type)                       macc                                    rom                                    
------------------------------------------------------------------------------------------------------------------------
2       conv2d (Conv2D)                    |||||||||||||||||||||||||||||||  35.5%  |                                 0.6% 
6       depthwise_conv2d (Conv2D)          ||||||||                          8.9%  |                                 0.6% 
9       conv2d_1 (Conv2D)                  ||||                              3.5%  |                                 0.3% 
12      conv2d_2 (Conv2D)                  |||||||                           8.2%  |||                               2.4% 
15      conv2d_3 (Conv2D)                  |||||||||||                      12.0%  ||||                              3.4% 
19      depthwise_conv2d_1 (Conv2D)        |||                               3.3%  ||||                              3.8% 
22      conv2d_4 (Conv2D)                  |||||                             5.3%  |||||||                           6.2% 
25      conv2d_5 (Conv2D)                  |||||||                           7.5%  |||||||||                         8.7% 
29      depthwise_conv2d_2 (Conv2D)        |                                 1.1%  |||||                             5.1% 
32      conv2d_6 (Conv2D)                  |||                               2.7%  |||||||||||||                    12.4% 
34      conv2d_7 (Conv2D)                  |||||                             5.3%  |||||||||||||||||||||||||        25.5% 
36      conv2d_8 (Conv2D)                  ||||||                            6.7%  |||||||||||||||||||||||||||||||  30.8% 
------------------------------------------------------------------------------------------------------------------------


Evaluation report (summary)
---------------------------------------------
NOT EVALUATED
